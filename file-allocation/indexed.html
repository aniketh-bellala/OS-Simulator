<html>
<head>
	<title>Indexed Allocation</title>
	    <meta charset="UTF-8">



	<style>
	.s_hide{
		display: none;
	}
	.s_show{
		display: block;
	}
	.some{
		background-color: #8D8DAA;
		color:black;
	}

	input{
		 width: 10%;
    padding: 12px 20px;
    margin: 8px 0;
    box-sizing: border-box;
    border: none;
    background-color: white;
    color: black;

	}

	.anchor,.anchor1{
		 background-color: black; /* Green */
    border: none;
    color: white;
    padding: 12px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 8px 0;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
    cursor: pointer;

	}


	.style1{
		background-color:#8D8DAA;
		color:white;
	}


  	.button1 {
    background-color:black; /* Green */
    border: none;
    color: white;
    padding: 12px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 8px 0;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
    cursor: pointer;
		align: center;

    }



.button1:hover {
    background-color:#D3D3D3;
    color: black;
}

	.a1{

		border: none;
		 margin: 8px 0;
		border:solid 2px white;
		background-color: yellow;
		  text-align: center;
		font-weight: bold;
		font-size: 16px;

	}
	body{
  background: #8D8DAA;
  color:#fff;
}
	</style>
</head>

<body onload="initialise()">

	<!-- <marquee class="some" behavior="alternate" scrollamount=10 align="center"> -->
		<h1 style="font-size: 350%" class="some" align="center" > Single-level Indexed Scheduling
	<!-- </marquee> -->
	<div><a class="button1" style="position:relative" href="Index page/index._page.html">Go Back</a>
	</div>
	</h1>

<h4 align="center">
	<p> Enter the number of files </p>
	<input id="nof" type="number">

	<!-- <button class="button1"  onclick="show_fields()">OK</button> -->

	<p> Enter the block size </p>
		<input id="blockSiz" type="number">

		<button class="button1"  onclick="show_fields()">OK</button>

	<!-- =======================input fields =================================-->
	<form class="s_hide">
			<p> Your First File </p>
		File index:	<input id="file_no" type="number">
		Enter the size of the file:	 <input type="number">
		<!-- Enter the size of the block: <input type="number"> -->
		<div class="anchor" onclick="inside_form(0)">
			<a >DONE</a>
		</div align="left">
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>
			</ul>
			<div class="anchor1" onclick="allocate(0)">
				<a>ALLOCATE</a>
			</div>
			<div class="anchor1" onclick="del(0)">
				<a>DELETE</a>
			</div>
			<p class="frag_place" style="background-color: #DFDFDE ;color:white"></p><br>

		</form>

	<form class="s_hide">
			<p> Your Second File </p>
		File index:	<input  id="file_no" type="number">
		Enter the size of the file:	 <input type="number">
		<!-- Enter the size of the block: <input type="number"> -->
		<div class="anchor" onclick="inside_form(1)">
			<a >DONE</a>
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>
			</ul>
			<div class="anchor" onclick="allocate(1)">
			<a>ALLOCATE</a>
		</div>
			<div class="anchor1" onclick="del(1)">
				<a>DELETE</a>
			</div>
			<p class="frag_place" style="background-color: #DFDFDE ;color:white"></p><br>

	</form>

	<form class="s_hide">
			<p> Your Third File </p>
		File index:	<input  id="file_no" type="number">
		Enter the size of the file:	 <input type="number">
		<!-- Enter the size of the block: <input type="number"> -->
		<div class="anchor">
			<a onclick="inside_form(2)">DONE</a>
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>
			</ul>
			<div class="anchor">
			<a onclick="allocate(2)">ALLOCATE</a>
		</div>
		<div class="anchor1" onclick="del(2)">
				<a>DELETE</a>
			</div>
		  <p class="frag_place" style="background-color: #DFDFDE ;color:white"></p><br>

	</form>

	<form class="s_hide">
			<p> Your Fourth File </p>
		File index:	<input  id="file_no" type="number">
		Enter the size of the file:	 <input type="number">
		<!-- Enter the size of the block: <input type="number"> -->
		<div class="anchor">
			<a onclick="inside_form(3)">DONE</a>
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>
			</ul>
			<div class="anchor">
			<a onclick="allocate(3)">ALLOCATE</a>
		</div>
		<div class="anchor1" onclick="del(3)">
				<a>DELETE</a>
			</div>
		    <p class="frag_place" style="background-color: #DFDFDE ;color:white"></p><br>
	</form>

		<form class="s_hide">
			<p> Your Fifth File </p>
		File index:	<input  id="file_no" type="number">
		Enter the size of the file:	 <input type="number">
		<!-- Enter the size of the block: <input type="number"> -->
		<div class="anchor">
			<a onclick="inside_form(4)">DONE</a>
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>
			</ul>
		<div class="anchor">
			<a onclick="allocate(4)">ALLOCATE</a>
		</div>
		<div class="anchor1" onclick="del(4)">
				<a>DELETE</a>
			</div>
		<p class="frag_place" style="background-color: #DFDFDE ;color:white"></p><br>
		</form>

		<form class="s_hide">
			<p> Your Sixth File </p>
		File index:	<input  id="file_no" type="number">
		Enter the size of the file:	 <input type="number">
		<!-- Enter the size of the block: <input type="number"> -->
		<div class="anchor">
			<a onclick="inside_form(5)">ok</a>
		</div>
				<ul>
			<li class="s_hide">	Block_1:<input  type="number"></li>
			<li class="s_hide">	Block_2:<input  type="number"></li>
			<li class="s_hide">	Block_3:<input  type="number"></li>
			<li class="s_hide">	Block_4:<input  type="number"></li>
			<li class="s_hide">	Block_5:<input  type="number"></li>
			<li class="s_hide">	Block_6:<input  type="number"></li>
			<li class="s_hide">	Block_7:<input  type="number"></li>
			<li class="s_hide">	Block_8:<input  type="number"></li>
			<li class="s_hide">	Block_9:<input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>
			</ul>
			<div class="anchor">
			<a onclick="allocate(5)" >ALLOCATE</a>
		</div>
		<div class="anchor1" onclick="del(5)">
				<a>DELETE</a>
			</div>
		 <p class="frag_place" style="background-color: #DFDFDE ;color:white"></p><br>
		</form>

		<form class="s_hide">
			<p> Your Seventh File </p>
		File index:	<input  id="file_no" type="number">
		Enter the size of the file:	 <input type="number">
		Enter the size of the block: <input type="number">
		<div class="anchor">
			<a onclick="inside_form(6)">DONE</a>
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>
			</ul>
			<div class="anchor">
			<a onclick="allocate(6)">ALLOCATE</a>
		</div>
		<div class="anchor1" onclick="del(6)">
				<a>DELETE</a>
			</div>
		    <p class="frag_place" style="background-color: #DFDFDE ;color:white"></p><br>
		</form>

		<form class="s_hide">
			<p> Your Eight File </p>
		File index:	<input  id="file_no" type="number">
		Enter the size of the file:	 <input type="number">
		<!-- Enter the size of the block: <input type="number"> -->
		<div class="anchor">
			<a onclick="inside_form(7)">DONE</a>
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>
			</ul>
			<div class="anchor">
				<a onclick="allocate(7)">ALLOCATE</a>
			</div>
			<div class="anchor1" onclick="del(7)">
				<a>DELETE</a>
			</div>
                 <p class="frag_place" style="background-color: #DFDFDE ;color:white"></p><br>
		</form>

<p id="error_check"></p>
<div class="s_hide" id="output_space">
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
</h4>
</div>
</body>

<script>
/*to display the input fields*/
	var form_no = -1,show_output=-1;
	var file_ind=[];
	var blockSize;

	function show_fields()
	{
			var no_of_files = document.getElementById("nof").value;
			blockSize = document.getElementById("blockSiz").value;
			for(var i=0;i<no_of_files;++i)
				s_add_in();

	}

	function s_add_in()
	{
		form_no = form_no +1;
		var f = document.getElementsByTagName("form")[form_no];

		var att = document.createAttribute("class");
		att.value ="s_show";

		f.setAttributeNode(att);
	}

/*to display the block numbers*/
var block_number=[];

windows.onload = function()
{
	initialise();
};

	function initialise()
	{
		for(var i=0;i<8;++i)
		{
			block_number.push(-1);
		}
		for(var i=0;i<1000;++i)
			file_ind.push(-1);
	}

	function inside_form(form_numb)
	{
		var pos = 12*form_numb;		//this is the base value
/*		document.getElementById("sample").innerHTML = block_number[form_numb];*/
			var ch = check(form_numb);
		if(ch == 0)
			return;

		var file_size = document.getElementsByTagName("input")[pos+3].value;

		console.log(file_size);
		console.log(blockSize);
		// var blk_size = document.getElementsByTagName("input")[pos+3].value;

		var no_of_blocks = (file_size / blockSize);

	//	if(file_size%blockSize != 0) no_of_blocks+=1;

		var pos_li = form_numb *10;
		for(var i=0;i<no_of_blocks;++i)
		{
			var f = document.getElementsByTagName("li")[pos_li+i];
			var att = document.createAttribute("class");
			att.value ="s_show";
			f.setAttributeNode(att);
		}

		var y = 3*form_numb +1;
		var f = document.getElementsByTagName("a")[y];
		var att = document.createAttribute("class");
		att.value = "s_show";
		f.setAttributeNode(att);
	}

	function check(in_num)
	{
		var len = file_ind.length;
		var z = in_num *12 + 2;
		var index = document.getElementsByTagName("input")[z].value;
		console.log("index: "+index)
		if(file_ind[index] == 1)
		{
			alert("The file index "+ index +"is already allocated");
			return 0;
		}
		else
		{
			file_ind[index]  =1;
			return 1;
		}
	}

	/*===================================ALLOCATION==============================*/


	function allocate(in_form)
	{
		var str = [];
		var pos = 12* in_form;
		var values = in_form * 10;
		var file_size = document.getElementsByTagName("input")[pos+3].value;

		console.log("allocate: file size " + file_size);

		// var blk_size = document.getElementsByTagName("input")[pos+3].value;

		var no_of_blocks = Math.ceil (file_size / blockSize);

		//for each and every entry check whether it is allocated or not
		for(var i=0;i<no_of_blocks;++i)
		{
			var x1 = document.getElementsByTagName("li")[values+i];	//this will give us the values+i th li element
			var x = x1.getElementsByTagName("input")[0].value;		// this will give us the 0th input element in the x1 li , we put 0 coz each 														li has only 1 input

			console.log("x1 = " + x1);
			console.log(x);

			if(file_ind[x] == 1)
			{
				alert("The file index "+ x +" is already allocated");
				for(var j=0;j<i;++j)
				{
					var x1 = document.getElementsByTagName("li")[values+j];	//this will give us the values+i th li element
					var x = x1.getElementsByTagName("input")[0].value;
					file_ind[x]=0;
				}
				return;
			}

			else{
				file_ind[x]=1;
			}

			if(i == no_of_blocks-1)
			{
				alert("All the files have been allocated");
				var frag;
				frag=((no_of_blocks)*blockSize)-file_size;
				if(frag!=0)
				{
				  document.getElementsByClassName("frag_place")[in_form].innerHTML="<h3>Internal Fragment :"+frag;
			    }

				var f =document.getElementById("output_space");
				var att = document.createAttribute("class");
				att.value = "s_show";
				f.setAttributeNode(att);

				var index_value = document.getElementsByTagName("input")[pos+2].value;
				str = str + index_value + " ---> ";

				if(no_of_blocks == (file_size / blockSize) )
				{
						for(var i=0;i<no_of_blocks;++i)
						{
							// im retriving the file number(block number) and put it in the chosen paragraphs
							var x1 = document.getElementsByTagName("li")[values+i];
							var x = x1.getElementsByTagName("input")[0].value;
							if(i== no_of_blocks-1)
							{
								str = str + x;
							}
							else{
								str = str + x+", ";
							}

							if(i == no_of_blocks-1){
								var k = document.getElementsByClassName("out")[in_form];
								k.innerHTML = str;

								if(in_form == 0){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 1){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 2){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 3){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 4){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 5){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 6){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 7){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
							}
						}
					}
					else
                        {

                          for(var i=0;i<no_of_blocks;++i)
						{
							var x1 = document.getElementsByTagName("li")[values+i];
							var x = x1.getElementsByTagName("input")[0].value;
							if(i== no_of_blocks-1)
							{
								str = str + x;
							}
							else{
								str = str + x+", ";
							}

							/* for file 1 give red,2->blue*/
							//here we style the output paragraph
							if(i== no_of_blocks-1){
								var k = document.getElementsByClassName("out")[in_form];
								k.innerHTML = str;

								if(in_form == 0){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 1){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 2){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 3){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 4){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 5){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 6){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
								if(in_form == 7){
									k.style.backgroundColor = "#DFDFDE";
									k.style.color = "black";
								}
							}
						}
                        }
			}
		}
	}

	function del(in_form)
	{
		var out_start=0;
		//find the starting index of the output
		for(var i=0;i<8;++i)
		{
			var pos = 12* in_form;
			var values = in_form * 10;
			var file_size = document.getElementsByTagName("input")[pos+3].value;
			// var blockSize = document.getElementsByTagName("input")[pos+3].value;

			var values = in_form * 10;

			var no_of_blocks = Math.ceil (file_size / blockSize);



			if(i == in_form)
			{
				file_ind[in_form] = 0;
				var k =document.getElementsByClassName("out")[in_form];
				k.innerHTML = "";
				for(var j=0; j<no_of_blocks; ++j)
				{
					var x1 = document.getElementsByTagName("li")[values+j];	//this will give us the values+i th li element
					var x = x1.getElementsByTagName("input")[0].value;

					file_ind[x] = 0;
				}
			}

			out_start = out_start + no_of_blocks;
		}
	}

</script>
</html>
